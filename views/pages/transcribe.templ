package pages

import (
	"github.com/brian-nunez/bscribe/views/components/badge"
	"github.com/brian-nunez/bscribe/views/components/button"

	icons "github.com/bryanvaz/go-templ-lucide-icons"
)

templ Transcribe() {
	@Layout() {
		<div class="min-h-screen flex flex-col transition-colors duration-300 bg-background-light dark:bg-background-dark text-gray-800 dark:text-gray-100 font-sans">
			@Navbar()
			<main class="flex-grow flex flex-col justify-center relative pt-20">
				<div class="absolute inset-0 bg-glow pointer-events-none z-0"></div>
				<div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 w-full py-12 flex flex-col items-center text-center">
					@badge.Badge(badge.Props{
						Class: "mb-8 px-3 py-1 border-primary/30 bg-primary/10 backdrop-blur-sm",
					}) {
						<span class="w-2 h-2 rounded-full bg-primary mr-2 animate-pulse"></span>
						<span class="text-xs font-bold text-primary tracking-wider uppercase">AI Powered Transcription</span>
					}
					<h1 class="text-5xl md:text-7xl font-display font-extrabold tracking-tight mb-6 leading-tight">
						Turn your audio into 
						<br class="hidden md:block"/>
						<span class="text-primary drop-shadow-md">structured text.</span>
					</h1>
					<p class="text-lg md:text-xl text-gray-600 dark:text-gray-400 max-w-2xl mb-12">
						Professional grade transcription engine focused on speed, accuracy, and speaker identification. Drag and drop to get started.
					</p>
					<div class="w-full max-w-3xl">
						@UploadArea()
						<div class="mt-8 flex flex-col sm:flex-row gap-4 justify-center">
							@button.Button(button.Props{
								Class: "bg-primary text-white hover:brightness-110 shadow-lg shadow-primary/20 hover:shadow-primary/40 transform hover:-translate-y-0.5",
							}) {
								Start Upload
								@icons.ArrowRight(templ.Attributes{"class": "ml-2 w-5 h-5"})
							}
							@button.Button(button.Props{
								Variant: button.VariantOutline,
								Class:   "border-gray-300 dark:border-white/20 text-gray-700 dark:text-white hover:bg-gray-100 dark:hover:bg-white/10",
							}) {
								My Transcripts
							}
						</div>
					</div>
					@StatsRow()
				</div>
			</main>
			@Footer()
		</div>
		<script>
		const themeToggle = document.getElementById('theme-toggle');
		const html = document.documentElement;
		themeToggle.addEventListener('click', () => {
			html.classList.toggle('dark');
		});
		</script>
	}
}

templ Navbar() {
	<nav class="w-full border-b border-gray-200 dark:border-white/10 backdrop-blur-md fixed top-0 z-50 bg-background-light/80 dark:bg-background-dark/80">
		<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
			<div class="flex justify-between h-20 items-center">
				<div class="flex items-center gap-2">
					<div class="bg-primary rounded p-1 text-black">
						@icons.AudioWaveform(templ.Attributes{"class": "w-6 h-6"})
					</div>
					<span class="font-bold text-xl tracking-tight font-display">Audio<span class="text-primary">Scribe</span></span>
				</div>
				<div class="hidden md:flex space-x-8">
					@NavLink("Upload", "#", true)
					@NavLink("My Transcripts", "#", false)
					@NavLink("Profile", "#", false)
				</div>
				<div class="flex items-center gap-4">
					@button.Button(button.Props{
						ID:      "theme-toggle",
						Variant: button.VariantGhost,
						Class:   "rounded-full p-2 hover:bg-gray-200 dark:hover:bg-white/10 text-gray-500 dark:text-gray-400",
					}) {
						@icons.Sun(templ.Attributes{"class": "w-5 h-5"})
					}
					<div class="hidden md:block font-bold text-sm">Brian Nunez</div>
					<img alt="User Profile" class="h-8 w-8 rounded-full border border-gray-200 dark:border-gray-700" src="https://lh3.googleusercontent.com/aida-public/AB6AXuC5K_SuhM_ToBjouQZwRdYrjhGmncjyqE7T5lFWSOLfLggMUKn9Zr28BJg0sTrpNWyOUO1Z7-DZW1TD1ChwslnBp2EY8hlntoRr5KaCMaNqksq7l4jfIbbTMRioqtlQ4sjdlwMTEXU10MyzfvWPpDoGD9tTqn1BXjyxDuQKal--pob8CUAHM2b7HmWO_zxYl9r7nbC3KIJrr0zwk_AXqQWkiWgMiJ3wtcJpfjAec68h9RJ3UgVMFdMAM2bp1zf1Yso2XJIkC7bMwQ"/>
				</div>
			</div>
		</div>
	</nav>
}

templ UploadArea() {
	<div class="group relative w-full h-64 border-2 border-dashed border-gray-300 dark:border-white/20 rounded-2xl bg-white/50 dark:bg-surface-dark hover:bg-white/80 dark:hover:bg-white/5 hover:border-primary dark:hover:border-primary transition-all duration-300 flex flex-col items-center justify-center cursor-pointer overflow-hidden backdrop-blur-sm">
		<input class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20" type="file"/>
		<div class="z-10 flex flex-col items-center transition-transform duration-300 group-hover:scale-105">
			<div class="p-4 rounded-full bg-primary/10 text-primary mb-4 group-hover:bg-primary group-hover:text-black transition-colors">
				@icons.CloudUpload(templ.Attributes{"class": "w-10 h-10"})
			</div>
			<p class="text-lg font-semibold text-gray-900 dark:text-white mb-1">Drag & drop or click to upload</p>
			<p class="text-sm text-gray-500 dark:text-gray-400">Supports MP3, WAV, M4A (Max 100MB)</p>
		</div>
		<div class="absolute inset-0 opacity-0 group-hover:opacity-10 dark:opacity-0 dark:group-hover:opacity-5 transition-opacity duration-500 pointer-events-none bg-[url('https://www.transparenttextures.com/patterns/diagmonds-light.png')]"></div>
	</div>
}

templ StatsRow() {
	<div class="mt-20 w-full border-t border-gray-200 dark:border-white/10 pt-10">
		<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
			@StatItem("15", "Files Transcribed")
			<div class="border-l-0 md:border-l md:border-r border-gray-200 dark:border-white/10 px-8">
				@StatItem("120+", "Minutes Total")
			</div>
			@StatItem("99%", "Avg. Accuracy")
		</div>
	</div>
}

templ StatItem(value, label string) {
	<div class="flex flex-col items-center">
		<span class="text-4xl font-bold text-gray-900 dark:text-white mb-1">{ value }</span>
		<span class="text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide">{ label }</span>
	</div>
}

templ NavLink(text, href string, active bool) {
	<a
		href={ templ.SafeURL(href) }
		class={ "font-medium transition-colors", 
		templ.KV("text-gray-900 dark:text-white hover:text-primary", active),
		templ.KV("text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-white", !active) }
	>
		{ text }
	</a>
}

templ Footer() {
	<footer class="border-t border-gray-200 dark:border-white/10 bg-background-light dark:bg-background-dark py-6">
		<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center gap-4">
			<p class="text-sm text-gray-500 dark:text-gray-500">© 2023 AudioScribe AI. All rights reserved.</p>
			<div class="flex gap-6">
				<a href="#" class="text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors">GitHub</a>
				<a href="#" class="text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors">Twitter</a>
			</div>
		</div>
	</footer>
}
